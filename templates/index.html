<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="icon" href="static/img/logo.png" type="image/png">
  <link rel="stylesheet" href="static/style.css">
  <title>Transpha</title>
</head>
<body>
    <div class="top__bg flex col">
        <header class="flex row">
            <img src="/static/img/logo.png"
            <div class="logo flex col">
                <p>Transpha</p>
            </div>
           </header>
           
           <section class="section-one">
               <div class="content1">
                   <div class="min-content">
                   <h4>Fast? Thatâ€™s an understatement</h4>
                   <p> With <span> Transpha</span>, you get the speed you need to send very large files with relative ease and absolute comfort.
                </p>
                <br/>
                <div class="button">
                  
                    <span class="one">
                        <img src="../static/img/Group.png" class="image" alt="windows" />
                 <a href="{% url_for('download', folder_name=uploads) %}">{{ download }} <button onclick="" class="click">Download for Windows</button></a>      
                    </span>
                    <br>
                    <br>
                    <br>
                    <div>
                    <p>Download for Mac and Linux coming soon...</p>
                    </div>
                </div>
                <div>
                <img src="static/img/Illustration(2).png" alt="illustration"  class="vector"/>
               </div>
           </section>

           <footer>
               <div class="content">
                  <a href="https://www.twitter.com/transpha" target="_blank"><img src="static/img/Vector.png" alt="twitter" class="bird" />  </a>  
                  
               </div>
               <div class="content1">
                   <p>Have questions? 
                   <span class="blue"><a href="mailto:transphaapp@gmail.com" target="_blank">Send us a mail</a></span>
</p>
<script>
  
    function downloadBlobData(blobData, filename) {
        let blobUrl = URL.createObjectURL(blobData) // create a url from blob
        const a = document.createElement('a') // create a virtual link
        a.href = blobUrl // set the href of link to the blob url
        a.download = filename || 'download' // set filename to filename if defined otherwise download
        const clickHandler = () => {
            setTimeout(() => { // delay running for 200ms
                URL.revokeObjectURL(blobUrl) // revoke the blob url
                this.removeEventListener('click', clickHandler) // 
            }, 200)
        }
        a.addEventListener('click', clickHandler)
        a.click() // click the link to download
        return a
    }
    const btn = document.querySelector('.one .click')
    btn.addEventListener('click', ()=> {
        fetch('/download', { // make a POST request to the server
            method: 'POST'
        }).then(res => res.blob()) // get the blob data from response
        .then(res => downloadBlobData(res, 'transpha.exe')) // send the blob to the function above
    })
</script>
</body>
</html>
